---
import '../../styles/global.css';

import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import BackgroundWrapper from '../../components/BackgroundWrapper.astro';
import { allMovies } from '../../moviesData';

export function getStaticPaths() {
  return allMovies.map((movie) => {

    const slug = movie.href.split('/').pop();

    return {
      params: { slug },
      props: { movie: movie },
    };

  });
}

const { movie } = Astro.props as { movie: any };

const sinopsis = "Né gasso né, ai tchoy, cy bai da bessa bessa, bai da bessa no papai, ay tchy, bi casa meu cassogo bai da bess bai da bess ca-so-go nes ca so nes ga so da besso, will eu vo si da vo si da do besso, cy bai da besso no will bai da bess no papassao, so nes gasso ne gasso da besso"
---

<Layout class="bg-[#141414] font-sans">
  <BackgroundWrapper src={movie.img.src}>
    <Header />
    <section class="relative z-10 mx-auto flex h-[80dvh] max-w-[1100px] flex-col justify-end px-4 py-12 text-white">
      <div class="flex items-end gap-4">
        <h1 class="text-3xl font-extrabold md:text-5xl">{movie.title}</h1>
        <p class="mt-3 text-gray-300">⭐ {movie.rating}</p>
      </div>
      <div class="mt-5 flex flex-wrap items-center gap-2 sm:mt-6 sm:gap-3 md:gap-4">
        <!-- Play -->
        <button
          type="button"
          aria-label="Play"
          class="inline-flex min-h-[40px] items-center gap-1.5 rounded-md bg-[#0b60ab] px-3 py-2 font-semibold text-white shadow-md transition hover:bg-[#094c86] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0b60ab]/60 focus-visible:ring-offset-2 sm:min-h-[44px] sm:gap-2 sm:px-4 md:px-5"
        >
          <span class="flex h-3.5 w-3.5 items-center justify-center sm:h-4 sm:w-4">
            <svg class="h-3.5 w-3.5 sm:h-4 sm:w-4" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <path d="M8 5v14l11-7-11-7z" fill="#ffffff"></path>
            </svg>
          </span>
          <span class="text-xs sm:text-sm md:text-base">Play</span>
        </button>

        <!-- Favourite -->
        <button
          type="button"
          aria-label="Add to favourites"
          class="inline-flex min-h-[40px] items-center gap-1.5 rounded-md bg-[#0b60ab] px-3 py-2 font-semibold text-white shadow-md transition hover:bg-[#094c86] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0b60ab]/60 focus-visible:ring-offset-2 sm:min-h-[44px] sm:gap-2 sm:px-4 md:px-5"
        >
          <span class="flex h-4 w-4 items-center justify-center leading-none">+</span>
          <span class="text-xs sm:text-sm md:text-base">Favourite</span>
        </button>

        <!-- Trailer -->
        <button
          type="button"
          aria-label="Watch trailer"
          class="inline-flex min-h-[40px] items-center gap-1.5 rounded-md bg-[#0b60ab] px-3 py-2 font-semibold text-white shadow-md transition hover:bg-[#094c86] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0b60ab]/60 focus-visible:ring-offset-2 sm:min-h-[44px] sm:gap-2 sm:px-4 md:px-5"
        >
          <span class="text-xs sm:text-sm md:text-base">Trailer</span>
        </button>
      </div>
    </section>
  </BackgroundWrapper>
  <Footer />
</Layout>
